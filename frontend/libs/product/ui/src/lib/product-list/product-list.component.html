<div #container class="product-container">
  <cdk-virtual-scroll-viewport
    [itemSize]="itemHeight"
    [minBufferPx]="0"
    [maxBufferPx]="0"
    (scrolledIndexChange)="onScroll($event)"
    class="viewport"
  >
    <div *cdkVirtualFor="let row of getRows(); let index = index" class="row">
      <div
        *ngFor="let product of row"
        class="product-item"
        [style.flex]="itemFlex"
      >
        <m-org-product-card
          [product]="product"
          (sizeChange)="onSizeChange($event)"
        ></m-org-product-card>
      </div>
    </div>
  </cdk-virtual-scroll-viewport>
</div>
